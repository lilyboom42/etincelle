{% extends 'base.html.twig' %}

{% block title %}Demandes de rendez-vous en attente{% endblock %}

{% block body %}
<div class="container my-5">
    <h1 class="text-center mb-4">Demandes de rendez-vous en attente</h1>

    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th class="d-none d-md-table-cell">ID</th>
                    <th>Date et heure</th>
                    <th>Service</th>
                    <th>Client</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for appointment in appointments %}
                    <tr>
                        <td class="d-none d-md-table-cell">{{ appointment.id }}</td>
                        <td>{{ appointment.appointmentDate|date('d/m/Y H:i') }}</td>
                        <td>{{ appointment.service.name }}</td>
                        <td>{{ appointment.user.email }}</td>
                        <td>
                            <div class="d-flex flex-wrap gap-2">
                                <form action="{{ path('admin_appointment_approve', {'id': appointment.id}) }}" method="post">
                                    <input type="hidden" name="_token" value="{{ csrf_token('approve' ~ appointment.id) }}">
                                    <button type="submit" class="btn btn-success-custom btn-sm">Approuver</button>
                                </form>
                                <form action="{{ path('admin_appointment_reject', {'id': appointment.id}) }}" method="post">
                                    <input type="hidden" name="_token" value="{{ csrf_token('reject' ~ appointment.id) }}">
                                    <button type="submit" class="btn btn-danger-custom btn-sm">Refuser</button>
                                </form>
                            </div>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="5" class="text-center-custom text-muted-custom">Aucune demande de rendez-vous en attente.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
